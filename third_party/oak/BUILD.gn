# Copyright 2025 The Chromium Authors
# Use of this source code is governed by a BSD-style license that can be
# found in the LICENSE file.

import("//components/proto_extras/proto_extras.gni")
import("//third_party/protobuf/proto_library.gni")

proto_sources = [
  "chromium/proto/attestation/endorsement.proto",
  "chromium/proto/attestation/eventlog.proto",
  "chromium/proto/attestation/evidence.proto",
  "chromium/proto/chromium_types/any.proto",
  "chromium/proto/chromium_types/timestamp.proto",
  "chromium/proto/crypto/certificate.proto",
  "chromium/proto/crypto/crypto.proto",
  "chromium/proto/digest.proto",
  "chromium/proto/session/messages.proto",
  "chromium/proto/session/session.proto",
  "chromium/proto/variant.proto",
]

proto_library("oak_proto") {
  sources = proto_sources
  proto_in_dir = "chromium"
  cc_generator_options = "lite"
}

# Generate base::Value serialization helper.
proto_extras("oak_proto_extras") {
  sources = proto_sources
  proto_in_dir = "chromium"
  deps = [ ":oak_proto" ]
  omit_stream_operators = true
  omit_equality = true
}

# Generate test helper.
proto_test_extras("oak_proto_test_extras") {
  sources = proto_sources
  proto_in_dir = "chromium"
  deps = [ ":oak_proto" ]
  extras_deps = [ ":oak_proto_extras" ]
}
